(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{x:()=>O});var t=document.querySelectorAll(".popup"),n=document.querySelector("#popupAvatar"),r=document.querySelector("#popupEdit"),o=document.querySelector("#popupAdd"),c=document.querySelector("#popupImage"),a=document.querySelector("#popupDelete"),u=document.querySelector(".profile__image"),i=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),s=document.querySelector("#avatar"),d=document.querySelector("#edit"),f=document.querySelector("#add"),m=document.querySelector("#delete"),p=document.querySelector("#url-avatar"),v=document.querySelector(".profile__title"),y=document.querySelector(".profile__text"),h=document.querySelector("#person-input"),_=document.querySelector("#about-input"),b=document.querySelector("#place-input"),S=document.querySelector("#url-input"),q=document.querySelector(".cards"),L=c.querySelector(".popup__image"),g=c.querySelector(".popup__text"),E={baseUrl:"https://nomoreparties.co/v1/wbc-cohort-1",headers:{authorization:"61650a97-0198-4977-9b18-131273aaff2f","Content-Type":"application/json"}};function k(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}function C(e){console.log(e)}var x=document.querySelector("body");function A(e){e.classList.remove("popup_opened"),x.classList.remove("overflow-hidden"),document.removeEventListener("keydown",U)}function w(e){e.classList.add("popup_opened"),x.classList.add("overflow-hidden"),document.addEventListener("keydown",U)}function U(e){"Escape"===e.key&&A(document.querySelector(".popup_opened"))}var O,j=null;function P(e){var t=document.querySelector("#card-template").content.querySelector(".card__item").cloneNode(!0),n=t.querySelector(".card__image"),r=t.querySelector(".card__delete-button"),o=t.querySelector(".card__like-button"),u=t.querySelector(".card__like-counter");n.src=e.link,n.alt=e.name,t.id=e._id,t.querySelector(".card__title").textContent=e.name,u.textContent=e.likes.length,o.addEventListener("click",(function(){o.classList.contains("card__like-button_active")?function(e,t,n){return(r=e.id,fetch("".concat(E.baseUrl,"/cards/likes/").concat(r),{method:"DELETE",headers:E.headers}).then(k)).then((function(e){t.classList.remove("card__like-button_active"),n.textContent=e.likes.length})).catch(C);var r}(t,o,u):function(e,t,n){return(r=e.id,fetch("".concat(E.baseUrl,"/cards/likes/").concat(r),{method:"PUT",headers:E.headers}).then(k)).then((function(e){t.classList.add("card__like-button_active"),n.textContent=e.likes.length})).catch(C);var r}(t,o,u)}));for(var i=0;i<e.likes.length;i++)e.likes[i]._id===O&&o.classList.add("card__like-button_active");return r.addEventListener("click",(function(e){j=e.target.closest(".card__item"),w(a)})),e.owner._id!==O&&r.remove(),n.addEventListener("click",(function(){L.src=e.link,L.alt=e.name,g.textContent=e.name,w(c)})),t}function T(e,t){var n=document.querySelector(".".concat(e.id,"-error"));e.classList.remove(t.inputErrorClass),n.classList.remove(t.errorClass),n.textContent=""}function D(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(e){T(e,t)})),B(r,t)}function B(e,t){var n=t.inactiveButtonClass;e.classList.add(n),e.disabled=!0}function I(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?function(e,t){var n=t.inactiveButtonClass;e.classList.remove(n),e.disabled=!1}(t,n):B(t,n)}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Сохранить";t.textContent=e?"Сохранение...":n}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H,M={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type-error",errorClass:"form__input-error_active"};u.addEventListener("click",(function(){s.reset(),D(s,M),w(n)})),i.addEventListener("click",(function(){h.value=v.textContent,_.value=y.textContent,D(d,M),w(r)})),l.addEventListener("click",(function(){f.reset(),D(f,M),w(o)})),s.addEventListener("submit",(function(e){var t;e.preventDefault(),N(!0,e.submitter),(t=p.value,fetch("".concat(E.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:E.headers,body:JSON.stringify({avatar:t})}).then(k)).then((function(e){u.style.backgroundImage="url(".concat(e.avatar,")")})).then((function(){return A(n)})).finally((function(){N(!1,e.submitter)}))})),d.addEventListener("submit",(function(e){var t,n;e.preventDefault(),N(!0,e.submitter),(t=h.value,n=_.value,fetch("".concat(E.baseUrl,"/users/me"),{method:"PATCH",headers:E.headers,body:JSON.stringify({name:t,about:n})}).then(k)).then((function(e){v.textContent=e.name,y.textContent=e.about})).then((function(){return A(r)})).finally((function(){N(!1,e.submitter)}))})),f.addEventListener("submit",(function(e){var t,n;e.preventDefault(),N(!0,e.submitter),(t=b.value,n=S.value,fetch("".concat(E.baseUrl,"/cards"),{method:"POST",headers:E.headers,body:JSON.stringify({name:t,link:n})}).then(k)).then((function(e){q.prepend(P(e))})).then((function(){return A(o)})).finally((function(){N(!1,e.submitter)}))})),m.addEventListener("submit",(function(e){return e.preventDefault(),(t=j.id,fetch("".concat(E.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:E.headers}).then(k)).then((function(){j.remove(),A(a),j=null})).catch(C);var t})),t.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&A(e),t.target.classList.contains("popup__close-button")&&A(e)}))})),H=M,Array.from(document.querySelectorAll(H.formSelector)).forEach((function(e){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);I(n,r,t),n.forEach((function(e){e.addEventListener("input",(function(){(function(e,t){e.validity.valid?T(e,t):function(e,t,n){var r=document.querySelector(".".concat(e.id,"-error"));e.classList.add(n.inputErrorClass),r.classList.add(n.errorClass),r.textContent=t}(e,e.validationMessage,t)})(e,t),I(n,r,t)}))}))}(e,H)})),Promise.all([fetch("".concat(E.baseUrl,"/users/me"),{headers:E.headers}).then(k),fetch("".concat(E.baseUrl,"/cards"),{headers:E.headers}).then(k)]).then((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];O=n._id,v.textContent=n.name,y.textContent=n.about,u.style.backgroundImage="url(".concat(n.avatar,")"),console.log(n);for(var o=0;o<r.length;o++)q.append(P(r[o]));console.log(r)})).catch(C)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxHQUFELE9BQUkvQyxFQUFPQyxRQUFYLGFBQStCLENBQ3pDQyxRQUFTRixFQUFPRSxVQUVmK0MsS0FBSzdDLEdBS0QyQyxNQUFNLEdBQUQsT0FBSS9DLEVBQU9DLFFBQVgsVUFBNEIsQ0FDdENDLFFBQVNGLEVBQU9FLFVBRWYrQyxLQUFLN0MsS0d1RVA2QyxNQUFLLFNBQVUsR0FBbUIsTSxrMUJBQUEsTUFBbEI2QyxFQUFrQixLQUFSSyxFQUFRLEtBQ2pDekUsRUFBU29FLEVBQVNwRCxJQUNsQm5ELEVBQVNvRCxZQUFjbUQsRUFBU3RELEtBQ2hDaEQsRUFBVW1ELFlBQWNtRCxFQUFTSSxNQUNqQ25ILEVBQWNnSCxNQUFNQyxnQkFBcEIsY0FBNkNGLEVBQVNMLE9BQXRELEtBQ0E1RSxRQUFRQyxJQUFJZ0YsR0FFWixJQUFLLElBQUl6QyxFQUFJLEVBQUdBLEVBQUk4QyxFQUFNdEQsT0FBUVEsSUFDaEN4RCxFQUFlOEcsT0FBTy9FLEVBQVd1RSxFQUFNOUMsS0FFekN4QyxRQUFRQyxJQUFJcUYsRUFDYixJQUNBakQsTUFBTXZDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvdmFyaWFibGVzLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwQXZhdGFyJyk7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwRWRpdCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwQWRkJyk7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBEZWxldGUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgYnV0dG9uT3BlbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBmb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhcicpO1xuZXhwb3J0IGNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQnKTtcbmV4cG9ydCBjb25zdCBmb3JtQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZCcpO1xuZXhwb3J0IGNvbnN0IGZvcm1EZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVsZXRlJyk7XG5leHBvcnQgY29uc3QgaW5wdXRBdmF0YXJVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXJsLWF2YXRhcicpO1xuZXhwb3J0IGNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XG5leHBvcnQgY29uc3QgdXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RleHQnKTtcbmV4cG9ydCBjb25zdCBpbnB1dFVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BlcnNvbi1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGlucHV0VXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fib3V0LWlucHV0Jyk7XG5leHBvcnQgY29uc3QgaW5wdXRQbGFjZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxhY2UtaW5wdXQnKTtcbmV4cG9ydCBjb25zdCBpbnB1dFBsYWNlVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VybC1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzJyk7XG5leHBvcnQgY29uc3QgcG9wdXBJbWcgPSBwb3B1cEltYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbmV4cG9ydCBjb25zdCBwb3B1cFR4dCA9IHBvcHVwSW1hZ2UucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0Jyk7IiwiLy8gQ29uZmlnXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBiYXNlVXJsOiBgaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL3diYy1jb2hvcnQtMWAsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnNjE2NTBhOTctMDE5OC00OTc3LTliMTgtMTMxMjczYWFmZjJmJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn1cblxuLy8g0KTRg9C90LrRhtC40Y8g0L/RgNC+0LLQtdGA0LrQuCDQvtGC0LLQtdGC0LBcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgaWYgKHJlcy5vaykge1xuICAgIHJldHVybiByZXMuanNvbigpO1xuICB9XG4gIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG59XG5cbi8vINCe0YjQuNCx0LrQuCwg0LrQvtGC0L7RgNGL0LUg0L/QvtC/0LDQtNCw0Y7RgiDQsiAuY2F0Y2hcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn1cblxuLy8g0JfQsNCz0YDRg9C30LrQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0YEg0YHQtdGA0LLQtdGA0LBcbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2ZXJVc2VyRGF0YSgpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8g0JfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmVySW5pdGlhbENhcmRzKCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLyDQntCx0L3QvtCy0LvQtdC90LjQtSDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KVxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLyDQoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hVc2VyRGF0YShuYW1lLCBhYm91dCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pXG4gIH0pXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG59XG5cbi8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZXhwb3J0IGZ1bmN0aW9uIHBvc3ROZXdDYXJkKG5hbWUsIGxpbmspIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSlcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8g0KPQtNCw0LvQtdC90LjQtSDRgtC+0LvRjNC60L4g0YHQstC+0LXQuSDQutCw0YDRgtC+0YfQutC4XG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlU2VydmVyQ2FyZChpZCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnNcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LvQsNC50LrQsFxuZXhwb3J0IGZ1bmN0aW9uIGxpa2VDYXJkKGlkKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiAnUFVUJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8g0KPQtNCw0LvQtdC90LjQtSDQu9Cw0LnQutCwXG5leHBvcnQgZnVuY3Rpb24gZGlzbGlrZUNhcmQoaWQpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuIiwiY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXApIHtcbiAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmZsb3ctaGlkZGVuJyk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZVBvcHVwRXNjKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cCkge1xuICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgYm9keS5jbGFzc0xpc3QuYWRkKCdvdmVyZmxvdy1oaWRkZW4nKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlUG9wdXBFc2MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cEVzYyhldmVudCkge1xuICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpO1xuICAgIGNsb3NlUG9wdXAocG9wdXApO1xuICB9XG59XG4iLCJpbXBvcnQgeyBoYW5kbGVFcnJvciwgbGlrZUNhcmQsIGRpc2xpa2VDYXJkLCBkZWxldGVTZXJ2ZXJDYXJkIH0gZnJvbSBcIi4vYXBpLmpzXCI7XG5pbXBvcnQgeyBjbG9zZVBvcHVwLCBvcGVuUG9wdXAgfSBmcm9tICcuL21vZGFsLmpzJztcbmltcG9ydCB7IHBvcHVwRGVsZXRlLCBwb3B1cEltYWdlLCBwb3B1cEltZywgcG9wdXBUeHQgfSBmcm9tICcuL3ZhcmlhYmxlcy5qcyc7XG5pbXBvcnQgeyB1c2VySWQgfSBmcm9tICcuL2luZGV4LmpzJ1xuXG5leHBvcnQgbGV0IGRlbGV0ZWRTZXJ2ZXJDYXJkID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZCkge1xuICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC10ZW1wbGF0ZScpLmNvbnRlbnQ7XG4gIGNvbnN0IGNhcmROZXcgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmROZXcucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcbiAgY29uc3QgbGlrZUNvdW50ZXIgPSBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcbiAgY2FyZEltYWdlLnNyYyA9IGNhcmQubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGNhcmQubmFtZTtcbiAgY2FyZE5ldy5pZCA9IGNhcmQuX2lkO1xuICBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLnRleHRDb250ZW50ID0gY2FyZC5uYW1lO1xuICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IGNhcmQubGlrZXMubGVuZ3RoO1xuXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpKSB7XG4gICAgICBkZWxldGVMaWtlKGNhcmROZXcsIGNhcmRMaWtlQnV0dG9uLCBsaWtlQ291bnRlcilcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkTGlrZShjYXJkTmV3LCBjYXJkTGlrZUJ1dHRvbiwgbGlrZUNvdW50ZXIpXG4gICAgfVxuICB9KVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcmQubGlrZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY2FyZC5saWtlc1tpXS5faWQgPT09IHVzZXJJZCkge1xuICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGRlbGV0ZWRTZXJ2ZXJDYXJkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5jYXJkX19pdGVtJylcbiAgICBvcGVuUG9wdXAocG9wdXBEZWxldGUpO1xuICB9KVxuICBpZiAoY2FyZC5vd25lci5faWQgIT09IHVzZXJJZCkge1xuICAgIGNhcmREZWxldGVCdXR0b24ucmVtb3ZlKClcbiAgfVxuXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBwb3B1cEltZy5zcmMgPSBjYXJkLmxpbms7XG4gICAgcG9wdXBJbWcuYWx0ID0gY2FyZC5uYW1lO1xuICAgIHBvcHVwVHh0LnRleHRDb250ZW50ID0gY2FyZC5uYW1lO1xuICAgIG9wZW5Qb3B1cChwb3B1cEltYWdlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmROZXc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDYXJkKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHJldHVybiBkZWxldGVTZXJ2ZXJDYXJkKGRlbGV0ZWRTZXJ2ZXJDYXJkLmlkKVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlbGV0ZWRTZXJ2ZXJDYXJkLnJlbW92ZSgpO1xuICAgICAgY2xvc2VQb3B1cChwb3B1cERlbGV0ZSk7XG4gICAgICBkZWxldGVkU2VydmVyQ2FyZCA9IG51bGw7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59XG5cbmZ1bmN0aW9uIGFkZExpa2UoY2FyZE5ldywgY2FyZExpa2VCdXR0b24sIGxpa2VDb3VudGVyKSB7XG4gIHJldHVybiBsaWtlQ2FyZChjYXJkTmV3LmlkKVxuICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUxpa2UoY2FyZE5ldywgY2FyZExpa2VCdXR0b24sIGxpa2VDb3VudGVyKSB7XG4gIHJldHVybiBkaXNsaWtlQ2FyZChjYXJkTmV3LmlkKVxuICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59XG4iLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5cbmltcG9ydCB7XG4gIHBvcHVwcywgcG9wdXBBdmF0YXIsIHBvcHVwRWRpdCwgcG9wdXBBZGQsXG4gIHByb2ZpbGVBdmF0YXIsIGJ1dHRvbk9wZW5FZGl0LCBidXR0b25PcGVuQWRkLFxuICBmb3JtQXZhdGFyLCBmb3JtRWRpdCwgZm9ybUFkZCxcbiAgdXNlck5hbWUsIHVzZXJBYm91dCwgaW5wdXRVc2VyTmFtZSwgaW5wdXRVc2VyQWJvdXQsXG4gIGlucHV0QXZhdGFyVXJsLCBpbnB1dFBsYWNlTmFtZSwgaW5wdXRQbGFjZVVybCxcbiAgY2FyZHNDb250YWluZXIsXG4gIGZvcm1EZWxldGVcbn0gZnJvbSAnLi92YXJpYWJsZXMuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FyZCwgZGVsZXRlQ2FyZCB9IGZyb20gJy4vY2FyZC5qcyc7XG5pbXBvcnQgeyByZXZhbGlkYXRlRm9ybSwgZW5hYmxlVmFsaWRhdGlvbiB9IGZyb20gJy4vdmFsaWRhdGUuanMnO1xuaW1wb3J0IHsgY2xvc2VQb3B1cCwgb3BlblBvcHVwIH0gZnJvbSAnLi9tb2RhbC5qcyc7XG5pbXBvcnQge1xuICBnZXRTZXJ2ZXJVc2VyRGF0YSwgZ2V0U2VydmVySW5pdGlhbENhcmRzLFxuICBwYXRjaFVzZXJBdmF0YXIsIHBhdGNoVXNlckRhdGEsIHBvc3ROZXdDYXJkLCBoYW5kbGVFcnJvclxufSBmcm9tICcuL2FwaS5qcyc7XG5pbXBvcnQgeyByZW5kZXJMb2FkaW5nIH0gZnJvbSAnLi91dGlscy5qcydcblxuZXhwb3J0IGxldCB1c2VySWQ7XG5cbmNvbnN0IG1lc3RvU2VsZWN0b3JzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQtYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3N1Ym1pdC1idXR0b25faW5hY3RpdmUnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlLWVycm9yJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZScsXG59XG5cbnByb2ZpbGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBBdmF0YXIpO1xuYnV0dG9uT3BlbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBFZGl0KTtcbmJ1dHRvbk9wZW5BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBBZGQpO1xuZm9ybUF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRGb3JtQXZhdGFyKTtcbmZvcm1FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm1FZGl0KTtcbmZvcm1BZGQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybUFkZCk7XG5mb3JtRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGRlbGV0ZUNhcmQpO1xuXG5wb3B1cHMuZm9yRWFjaCgocG9wdXApID0+IHtcbiAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XG4gICAgICBjbG9zZVBvcHVwKHBvcHVwKVxuICAgIH1cbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XG4gICAgICBjbG9zZVBvcHVwKHBvcHVwKVxuICAgIH1cbiAgfSlcbn0pXG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm1BdmF0YXIoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBldmVudC5zdWJtaXR0ZXIpO1xuICBwYXRjaFVzZXJBdmF0YXIoaW5wdXRBdmF0YXJVcmwudmFsdWUpXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICBwcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt1c2VyRGF0YS5hdmF0YXJ9KWA7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBjbG9zZVBvcHVwKHBvcHVwQXZhdGFyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7IHJlbmRlckxvYWRpbmcoZmFsc2UsIGV2ZW50LnN1Ym1pdHRlcikgfSlcbn1cblxuZnVuY3Rpb24gc3VibWl0Rm9ybUVkaXQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBldmVudC5zdWJtaXR0ZXIpXG4gIHBhdGNoVXNlckRhdGEoaW5wdXRVc2VyTmFtZS52YWx1ZSwgaW5wdXRVc2VyQWJvdXQudmFsdWUpXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICB1c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgICB1c2VyQWJvdXQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IGNsb3NlUG9wdXAocG9wdXBFZGl0KSlcbiAgICAuZmluYWxseSgoKSA9PiB7IHJlbmRlckxvYWRpbmcoZmFsc2UsIGV2ZW50LnN1Ym1pdHRlcikgfSlcbn1cblxuZnVuY3Rpb24gc3VibWl0Rm9ybUFkZChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICByZW5kZXJMb2FkaW5nKHRydWUsIGV2ZW50LnN1Ym1pdHRlcilcbiAgcG9zdE5ld0NhcmQoaW5wdXRQbGFjZU5hbWUudmFsdWUsIGlucHV0UGxhY2VVcmwudmFsdWUpXG4gICAgLnRoZW4oKGNhcmRzKSA9PiB7XG4gICAgICBjYXJkc0NvbnRhaW5lci5wcmVwZW5kKGNyZWF0ZUNhcmQoY2FyZHMpKTtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IGNsb3NlUG9wdXAocG9wdXBBZGQpKVxuICAgIC5maW5hbGx5KCgpID0+IHsgcmVuZGVyTG9hZGluZyhmYWxzZSwgZXZlbnQuc3VibWl0dGVyKSB9KVxufVxuXG5mdW5jdGlvbiBvcGVuUG9wdXBBdmF0YXIoKSB7XG4gIGZvcm1BdmF0YXIucmVzZXQoKTtcbiAgcmV2YWxpZGF0ZUZvcm0oZm9ybUF2YXRhciwgbWVzdG9TZWxlY3RvcnMpO1xuICBvcGVuUG9wdXAocG9wdXBBdmF0YXIpO1xufVxuXG5mdW5jdGlvbiBvcGVuUG9wdXBFZGl0KCkge1xuICBpbnB1dFVzZXJOYW1lLnZhbHVlID0gdXNlck5hbWUudGV4dENvbnRlbnQ7XG4gIGlucHV0VXNlckFib3V0LnZhbHVlID0gdXNlckFib3V0LnRleHRDb250ZW50O1xuICByZXZhbGlkYXRlRm9ybShmb3JtRWRpdCwgbWVzdG9TZWxlY3RvcnMpO1xuICBvcGVuUG9wdXAocG9wdXBFZGl0KTtcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwQWRkKCkge1xuICBmb3JtQWRkLnJlc2V0KCk7XG4gIHJldmFsaWRhdGVGb3JtKGZvcm1BZGQsIG1lc3RvU2VsZWN0b3JzKTtcbiAgb3BlblBvcHVwKHBvcHVwQWRkKTtcbn1cblxuZW5hYmxlVmFsaWRhdGlvbihtZXN0b1NlbGVjdG9ycyk7XG5cblByb21pc2UuYWxsKFtnZXRTZXJ2ZXJVc2VyRGF0YSgpLCBnZXRTZXJ2ZXJJbml0aWFsQ2FyZHMoKV0pXG4gIC50aGVuKGZ1bmN0aW9uIChbdXNlckRhdGEsIGNhcmRzXSkge1xuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgICB1c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgdXNlckFib3V0LnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XG4gICAgcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dXNlckRhdGEuYXZhdGFyfSlgO1xuICAgIGNvbnNvbGUubG9nKHVzZXJEYXRhKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXJkcy5sZW5ndGg7IGkrKykge1xuICAgICAgY2FyZHNDb250YWluZXIuYXBwZW5kKGNyZWF0ZUNhcmQoY2FyZHNbaV0pKVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhjYXJkcylcbiAgfSlcbiAgLmNhdGNoKGhhbmRsZUVycm9yKSIsImV4cG9ydCBmdW5jdGlvbiBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgc2VsZWN0b3JzKSB7XG4gIGNvbnN0IGZvcm1FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcyk7XG4gIGZvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5lcnJvckNsYXNzKTtcbiAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgY29uc3QgZm9ybUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzKTtcbiAgZm9ybUVycm9yLmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzLmVycm9yQ2xhc3MpO1xuICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSAnJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQsIHNlbGVjdG9ycykge1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCBzZWxlY3RvcnMpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoZnVuY3Rpb24gKGlucHV0RWxlbWVudCkge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV2YWxpZGF0ZUZvcm0oZm9ybUVsZW1lbnQsIHNlbGVjdG9ycykge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uU3VibWl0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICBpbnB1dExpc3QuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXRFbGVtZW50KSB7XG4gICAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpO1xuICB9KVxuICBpbmFjdGl2ZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmFjdGl2ZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQsIHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9KSB7XG4gIGJ1dHRvblN1Ym1pdC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25TdWJtaXQuZGlzYWJsZWQgPSB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZlU3VibWl0QnV0dG9uKGJ1dHRvblN1Ym1pdCwgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0pIHtcbiAgYnV0dG9uU3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIGJ1dHRvblN1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25TdWJtaXQsIHNlbGVjdG9ycykge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBpbmFjdGl2ZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG4gIH0gZWxzZSB7XG4gICAgYWN0aXZlU3VibWl0QnV0dG9uKGJ1dHRvblN1Ym1pdCwgc2VsZWN0b3JzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHNlbGVjdG9ycykge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uU3VibWl0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvblN1Ym1pdCwgc2VsZWN0b3JzKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGlucHV0RWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQsIHNlbGVjdG9ycyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvblN1Ym1pdCwgc2VsZWN0b3JzKTtcbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihzZWxlY3RvcnMpIHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChmb3JtRWxlbWVudCkge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpO1xuICB9KVxufSIsImV4cG9ydCBmdW5jdGlvbiByZW5kZXJMb2FkaW5nKGxvYWRpbmcsIGJ1dHRvbiwgYnV0dG9uVGV4dCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnKSB7XG4gIGlmIChsb2FkaW5nKSB7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJ1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHRcbiAgfVxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInBvcHVwcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInBvcHVwQXZhdGFyIiwicXVlcnlTZWxlY3RvciIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwicG9wdXBJbWFnZSIsInBvcHVwRGVsZXRlIiwicHJvZmlsZUF2YXRhciIsImJ1dHRvbk9wZW5FZGl0IiwiYnV0dG9uT3BlbkFkZCIsImZvcm1BdmF0YXIiLCJmb3JtRWRpdCIsImZvcm1BZGQiLCJmb3JtRGVsZXRlIiwiaW5wdXRBdmF0YXJVcmwiLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsImlucHV0VXNlck5hbWUiLCJpbnB1dFVzZXJBYm91dCIsImlucHV0UGxhY2VOYW1lIiwiaW5wdXRQbGFjZVVybCIsImNhcmRzQ29udGFpbmVyIiwicG9wdXBJbWciLCJwb3B1cFR4dCIsImNvbmZpZyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImhhbmRsZVJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImhhbmRsZUVycm9yIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJjbG9zZVBvcHVwIiwicG9wdXAiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VQb3B1cEVzYyIsIm9wZW5Qb3B1cCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInVzZXJJZCIsImRlbGV0ZWRTZXJ2ZXJDYXJkIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJjYXJkTmV3IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZSIsImNhcmREZWxldGVCdXR0b24iLCJjYXJkTGlrZUJ1dHRvbiIsImxpa2VDb3VudGVyIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJpZCIsIl9pZCIsInRleHRDb250ZW50IiwibGlrZXMiLCJsZW5ndGgiLCJjb250YWlucyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImNhdGNoIiwiZGVsZXRlTGlrZSIsImFkZExpa2UiLCJpIiwidGFyZ2V0IiwiY2xvc2VzdCIsIm93bmVyIiwiaGlkZUlucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJzZWxlY3RvcnMiLCJmb3JtRXJyb3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicmV2YWxpZGF0ZUZvcm0iLCJmb3JtRWxlbWVudCIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsImlucHV0U2VsZWN0b3IiLCJidXR0b25TdWJtaXQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJpbmFjdGl2ZVN1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJhY3RpdmVTdWJtaXRCdXR0b24iLCJyZW5kZXJMb2FkaW5nIiwibG9hZGluZyIsImJ1dHRvbiIsImJ1dHRvblRleHQiLCJtZXN0b1NlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsInJlc2V0IiwidmFsdWUiLCJhdmF0YXIiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdHRlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1c2VyRGF0YSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiZmluYWxseSIsImFib3V0IiwiY2FyZHMiLCJwcmVwZW5kIiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWxsIiwiYXBwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==